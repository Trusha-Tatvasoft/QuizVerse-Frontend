<div class="auth-main-container">
  <!-- Back to Sign In link -->
  <div class="back-link-container">
    <a href="/login" class="back-link">
      <img src="assets/images/back-arrow.svg" alt="Back" class="back-arrow-icon" />
      Back to Sign In
    </a>
  </div>

  <!-- Auth card container -->
  <div class="auth-card">
    <!-- Lock/email icon at the top -->
    <div class="logo pb-4">
      <mat-icon class="material-icons-outlined">email</mat-icon>
    </div>

    <!-- Header text for forgot password -->
    <div class="auth-header">
      <h1>Forgot Password?</h1>
      <p class="subtext">
        Enter your email address and we'll send you a link to reset your password
      </p>
    </div>

    <!-- Forgot password form -->
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
      <!-- Dynamic form field rendering -->
      @for (field of forgotPasswordFields; track field.name) {
        <div class="form-field">
          <label [for]="field.name">{{ field.label }}</label>
          <div class="input-group">
            <mat-icon fontSet="material-icons-outlined">
              @if (field.name === 'email') {
                mail
              }
            </mat-icon>
            <input
              [id]="field.name"
              [type]="field.type"
              [formControlName]="field.name"
              [placeholder]="field.placeholder"
              required
            />
          </div>
        </div>

        <!-- Error messages for the field -->
        @if (
          forgotPasswordForm.get(field.name)?.invalid && forgotPasswordForm.get(field.name)?.touched
        ) {
          <div class="error">
            @if (forgotPasswordForm.get(field.name)?.hasError('required')) {
              {{ field.label }} is required.
            }
            @if (forgotPasswordForm.get(field.name)?.hasError('pattern')) {
              Please enter a valid email format.
            }
          </div>
        }
      }

      <!-- Global error message -->
      @if (errorMessage) {
        <div class="error">{{ errorMessage }}</div>
      }

      <!-- Submit button with loader -->
      <app-filled-button [filledButtonConfig]="sendResetLinkButton" class="signin-button">
        @if (isLoading) {
          <span class="loader"></span>
        }
      </app-filled-button>
    </form>

    <!-- Navigation link to Sign In -->
    <div class="remember">
      Remember your password?
      <a class="signIn" href="/login">Sign In</a>
    </div>
  </div>
</div>
