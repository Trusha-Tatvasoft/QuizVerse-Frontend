<div class="auth-main-container">
  <!-- Back to Sign In link -->
  <div class="back-link-container">
    <a routerLink="/login" class="back-link">
      <img src="assets/images/back-arrow.svg" alt="Back" class="back-arrow-icon" />
      Back to Sign In
    </a>
  </div>

  <!-- Card wrapper for form content -->
  <div class="auth-card">
    <!-- Logo icon -->
    <div class="logo pb-4">
      <mat-icon fontSet="material-icons-outlined">email</mat-icon>
    </div>

    <!-- Heading and subtext -->
    <div class="auth-header">
      <h1>Forgot Password?</h1>
      <p class="subtext">
        Enter your email address and we'll send you a link to reset your password
      </p>
    </div>

    <!-- Reactive form for forgot password -->
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
      @for (field of forgotPasswordFields; track field.name) {
        <div class="d-flex flex-column justify-content-start form-field pb-1">
          <mat-label>{{ field.label }}</mat-label>

          <mat-form-field appearance="outline" class="full-width" [floatLabel]="'auto'">
            <mat-icon fontSet="material-icons-outlined" matPrefix>{{
              field.icon || 'mail'
            }}</mat-icon>

            <input
              matInput
              [id]="field.name"
              [type]="field.type"
              [formControlName]="field.name"
              [placeholder]="field.placeholder"
              autocomplete="off"
              required
            />

            @if (
              forgotPasswordForm.get(field.name)?.invalid &&
              forgotPasswordForm.get(field.name)?.touched
            ) {
              <mat-error>
                @if (forgotPasswordForm.get(field.name)?.hasError('required')) {
                  {{ field.validationMessages?.['required'] || field.label + ' is required.' }}
                } @else if (forgotPasswordForm.get(field.name)?.hasError('pattern')) {
                  {{
                    field.validationMessages?.['pattern'] || 'Please enter a valid email format.'
                  }}
                }
              </mat-error>
            }
          </mat-form-field>
        </div>
      }

      @if (errorMessage) {
        <div class="error">{{ errorMessage }}</div>
      }

      <!-- Submit button with loading spinner -->
      <app-filled-button [filledButtonConfig]="sendResetLinkButton" class="signin-button">
      </app-filled-button>
    </form>

    <div class="remember">
      Remember your password?
      <a class="signIn" routerLink="/login">Sign In</a>
    </div>
  </div>
</div>
